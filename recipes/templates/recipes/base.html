{% load static %}
<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Cuisinothèque{% endblock %}</title>

    <link
      rel="icon"
      type="image/x-icon"
      href="{% static 'recipes/img/favicon.ico' %}"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <script>
      (function () {
        try {
          var saved = localStorage.getItem("theme");
          var prefersDark =
            window.matchMedia &&
            window.matchMedia("(prefers-color-scheme: dark)").matches;
          var theme =
            saved === "dark" || saved === "light"
              ? saved
              : prefersDark
                ? "dark"
                : "light";

          var root = document.documentElement;
          root.classList.remove("theme-dark", "theme-light");
          root.classList.add(theme === "dark" ? "theme-dark" : "theme-light");
          root.setAttribute("data-theme", theme);
        } catch (e) {}
      })();
    </script>

    <!-- CSS -->
    <link rel="stylesheet" href="{% static 'recipes/css/style.css' %}" />
    <link rel="stylesheet" href="{% static 'recipes/css/recipe_form.css' %}" />
    <link rel="stylesheet" href="{% static 'recipes/css/recipe_list.css' %}" />
    <link
      rel="stylesheet"
      href="{% static 'recipes/css/recipe_detail.css' %}"
    />
    {% block extra_css %}{% endblock %}
  </head>

  <body>
    <header class="site-header">
      <div class="container header-inner">
        <a
          class="brand"
          href="{% url 'home' %}"
          aria-label="Retour à l'accueil"
        >
          <img
            class="brand-mark"
            src="{% static 'recipes/img/cuisinotheque.png' %}"
          />
          <span class="brand-name">Cuisinothèque</span>
        </a>

        <nav class="nav" aria-label="Navigation principale">
          <a class="nav-link" href="{% url 'home' %}">Accueil</a>
          <a class="nav-link" href="{% url 'recipe_list' %}">Recettes</a>
          <a class="nav-link" href="{% url 'recipe_create' %}">Ajouter</a>
          <a class="nav-link" href="{% url 'dashboard' %}">Tableau de bord</a>
        </nav>

        <div class="header-actions">
          <button class="icon-btn theme-toggle" type="button" id="themeToggle">
            <i class="fa-solid fa-moon theme-icon" aria-hidden="true"></i>
          </button>
          <button
            class="icon-btn nav-toggle"
            type="button"
            id="navToggle"
            aria-label="Ouvrir le menu"
            aria-controls="mobileNavOverlay"
            aria-expanded="false"
          >
            <i class="fa-solid fa-bars" aria-hidden="true"></i>
          </button>
        </div>
      </div>
    </header>

    <div
      class="mobile-nav-overlay"
      id="mobileNavOverlay"
      hidden
      aria-hidden="true"
    >
      <button
        class="mobile-nav-backdrop"
        id="mobileNavBackdrop"
        type="button"
        aria-label="Fermer le menu"
      ></button>
      <div
        class="mobile-nav-panel"
        id="mobileNavPanel"
        role="dialog"
        aria-modal="true"
        aria-label="Menu"
      >
        <div class="mobile-nav-top">
          <span>Menu</span>
          <button
            class="icon-btn"
            id="mobileNavClose"
            type="button"
            aria-label="Fermer le menu"
          >
            <i class="fa-solid fa-xmark" aria-hidden="true"></i>
          </button>
        </div>

        <div class="mobile-nav-links">
          <!-- Reprend EXACTEMENT tes liens existants -->
          <a class="nav-link" href="{% url 'home' %}">Accueil</a>
          <a class="nav-link" href="{% url 'recipe_list' %}">Recettes</a>
          <a class="nav-link" href="{% url 'recipe_create' %}">Ajouter</a>
          <a class="nav-link" href="{% url 'dashboard' %}">Tableau de bord</a>
        </div>
      </div>
    </div>

    <main id="main" class="site-main">{% block content %}{% endblock %}</main>

    <footer class="site-footer">
      <div class="container">
        <small>© 2025 Cuisinothèque</small><br />
        <small>made with ❤️</small>
      </div>
    </footer>

    <!-- GSAP -->
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>

    <!-- JS -->
    <script src="{% static 'recipes/js/animations.js' %}"></script>
  </body>
</html>
